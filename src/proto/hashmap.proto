syntax = "proto3";
import "google/protobuf/empty.proto";

package hashmap;

// Inputs

message Tag {
  uint32 tag_id = 1;
  string text = 2;
  int32 usages = 3;
}

message Item {
  string key = 2;
  string value = 3;
  string extra = 4;
  repeated string tags = 5;
}

message UpdateItem {
  ItemId id = 1;
  Item item = 2;
}


message UserId {
  string user_id = 1;
}

message ItemId {
  uint32 item_id = 1;
}
// Responses

message TagsResponse {
  repeated Tag tags = 1;
}

message ItemResponse {
  uint32 id = 1;
  string key = 2;
  string value = 3;
  string extra = 4;
  repeated Tag tags = 5;
}

message Items {
  repeated ItemResponse items = 1;
}

service Hashmap {
  rpc GetItems(UserId) returns (Items);
  rpc GetTags(UserId) returns (TagsResponse);
  rpc CreateItem(Item) returns (ItemId);
  rpc RemoveItem(ItemId) returns (google.protobuf.Empty);
  rpc EditItem(UpdateItem) returns (google.protobuf.Empty);
}
